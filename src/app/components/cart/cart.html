<div class="cart-container" [class.hidden]="!cartIsOpen()">
  <div class="cart-header">
    <h4 class="cart-header-caption">Cart items</h4>
    <button class="cart-btn-close" (click)="colseCart()">x</button>
  </div>

  <div class="cart-body">
    @if(cartitems().length ===0)
    {
    <div class="cart-empty">Cart is impty</div>
    }
    @else
    {
    @for(cartitem of cartitems(); track $index)
    {
    <div class="cart-item">
      <img [src]="cartitem.product.Image" width="100px" height="100px" alt="loading">
      <div class="cart-item-name">{{cartitem.product.Name}}</div>
      <div class="cart-item-quantity">
        <button [disabled]="cartitem.quantity===1"  (click)="decrementQuantity($index)">-</button>
        <span>{{cartitem.quantity}}</span>
        <button  (click)="incrementQuantity($index)">+</button>
      </div>
      <div class="cart-item-price">{{ cartitem.product.Price| currency:'USD':true:'1.0-2' }}</div>
      <button role="button" (click)="removeProdcutFromCart(cartitem.product)" class="cart-item-remove">x</button>
    </div>
    }
    }
  </div>

  @if (cartitems().length !== 0) {
  <div class="cart-footer">
    <div class="cart-summary">

      <div class="subtotal">
        <span class="subtotal-caption">Subtotal</span>
        <span class="subtotal-price">{{ getSubTotal() | currency:'USD':true:'1.0-2' }}</span>
      </div>

      <div class="shipping">
        <span class="shipping-caption">Shipping</span>
        <span class="shipping-price">{{ shippingPrice | currency:'USD':true:'1.0-2' }}</span>
      </div>

      <div class="total">
        <span class="total-caption">Total</span>
        <span class="total-price">{{ getTotal() | currency:'USD':true:'1.0-2' }}</span>
      </div>


      <div class="checkout">
        <button>PROCEED TO CHECKOUT</button>
      </div>

    </div>
  </div>
}
